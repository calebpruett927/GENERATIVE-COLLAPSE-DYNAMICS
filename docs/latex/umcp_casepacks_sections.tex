% umcp_casepacks_sections.tex - Drop-in CasePack sections for UMCP paper
% Generated: 2026-01-27 from RUN004 artifacts
% Contract: UMA.INTSTACK.v1
%
% Usage: \input{umcp_casepacks_sections} after \usepackage{umcp_casepacks}
%
% These sections render figures directly from the exported CSV artifacts.
% No placeholder images required - all plots are generated by PGFPlots.

% ============================================================================
% CASEPACK 1: SHM (Periodic Oscillator Control)
% ============================================================================
\section{CasePack 1: Periodic Oscillator (KIN.CP.SHM)}\label{sec:casepack_shm}

This CasePack is the kinematics control. It provides a phase-anchored return definition so that recurrence is physically legible and reproducible under the frozen contract \ContractName.

\subsection{Run identity (RUN004)}\label{sec:shm_runid}
\noindent\textbf{Contract:} \ContractName.\quad
\textbf{Run ID:} \texttt{KIN.CP.SHM.RUN004}.\quad
\textbf{N:} 1000.\quad
\textbf{dt:} 0.01\,s.\quad
\textbf{Target period:} 1.0000\,s (1\,Hz).

\subsection{Tier-1 identity checks (hard)}\label{sec:shm_idchecks}
\begin{itemize}
  \item $F = 1 - \omega$ max error \IDFomegaMaxErr\ (PASS).
  \item $\kappa = \ln(IC)$ max error \IDkappaMaxErr\ (PASS).
\end{itemize}

\subsection{Kernel summary (RUN004)}\label{sec:shm_summary}
\begin{table}[H]
\centering
\caption{Kernel statistics for \texttt{KIN.CP.SHM.RUN004}.}\label{tab:shm_stats}
\begin{tabular}{@{}lcccc@{}}
\toprule
\textbf{Invariant} & \textbf{Median} & \textbf{p05} & \textbf{p95} & \textbf{Notes} \\
\midrule
$\omega$ & 0.1956 & 0.0515 & 0.5245 & drift magnitude (bounded) \\
$F$ & 0.8044 & 0.4755 & 0.9485 & $F = 1 - \omega$ (derived) \\
$S$ & 0.9579 & 0.5506 & 0.9970 & normalized entropy channel \\
$C$ & 0.5000 & 0.0775 & 0.7881 & normalized curvature \\
$\tau_R$ & 1.0003\,s & 0.9971\,s & 1.0031\,s & phase-anchored return \\
$IC$ & 0.9197 & 0.5476 & 0.9942 & integrity \\
$\kappa$ & $-0.0837$ & $-0.6021$ & $-0.0058$ & $\ln(IC)$ (derived) \\
\bottomrule
\end{tabular}
\end{table}

\noindent\textbf{IC pass rate (RUN004):} 86.5\% of samples have $IC \geq 0.70$.

\subsection{Figures (direct from exported CSV)}\label{sec:shm_figs}

\begin{figure}[H]
\centering
\begin{tikzpicture}
\begin{groupplot}[
  group style={group size=1 by 7, vertical sep=0.45cm},
  width=0.92\textwidth,
  height=2.7cm,
  xlabel near ticks,
  ylabel near ticks,
  tick align=outside,
  tick style={black},
  xmin=0,
  every axis plot/.style={very thick, mark=none},
]
\nextgroupplot[ylabel={$\omega$}, title={SHM kernel traces (RUN004)}]
  \addplot table [col sep=comma, x=t, y=omega] {\RUNSHM/kernel/kernel.csv};

\nextgroupplot[ylabel={$F$}]
  \addplot table [col sep=comma, x=t, y=F] {\RUNSHM/kernel/kernel.csv};

\nextgroupplot[ylabel={$S$}]
  \addplot table [col sep=comma, x=t, y=S] {\RUNSHM/kernel/kernel.csv};

\nextgroupplot[ylabel={$C$}]
  \addplot table [col sep=comma, x=t, y=C] {\RUNSHM/kernel/kernel.csv};

\nextgroupplot[ylabel={$\tau_R$ (s)}]
  \addplot table [col sep=comma, x=t, y=tau_R] {\RUNSHM/kernel/kernel.csv};

\nextgroupplot[ylabel={$IC$}]
  \addplot table [col sep=comma, x=t, y=IC] {\RUNSHM/kernel/kernel.csv};

\nextgroupplot[ylabel={$\kappa$}, xlabel={time $t$ (s)}]
  \addplot table [col sep=comma, x=t, y=kappa] {\RUNSHM/kernel/kernel.csv};
\end{groupplot}
\end{tikzpicture}
\caption{SHM Tier-1 kernel traces rendered directly from \texttt{\RUNSHM/kernel/kernel.csv}.}
\label{fig:shm_kernel_traces}
\end{figure}

\begin{figure}[H]
\centering
\begin{tikzpicture}
\begin{axis}[
  width=0.92\textwidth,
  height=5.0cm,
  xlabel={$\tau_R$ (s)},
  ylabel={count},
  tick align=outside,
  tick style={black},
  ymajorgrids=false,
  xmajorgrids=false,
  title={SHM recurrence distribution (RUN004)},
]
\addplot+[
  hist={bins=30},
  fill=blue!30,
  draw=blue!70,
] table [col sep=comma, y=tau_R] {\RUNSHM/tables/tauR_series.csv};
\end{axis}
\end{tikzpicture}
\caption{$\tau_R$ histogram rendered from \texttt{\RUNSHM/tables/tauR\_series.csv}.}
\label{fig:shm_tauR_hist}
\end{figure}

% ============================================================================
% CASEPACK 2: BALLISTIC (Impact with Typed Weld)
% ============================================================================
\section{CasePack 2: Ballistic Motion with Impact (KIN.CP.BALLISTIC)}\label{sec:casepack_ballistic}

This CasePack forces explicit seam accounting under an impact event. Return is declared \texttt{NON\_RECURRENT\_BY\_DESIGN}, so continuity is not claimed; weld output is integrity-only.

\subsection{Run identity (RUN004)}\label{sec:bal_runid}
\noindent\textbf{Contract:} \ContractName.\quad
\textbf{Run ID:} \texttt{KIN.CP.BALLISTIC.RUN004}.\quad
\textbf{N:} 1202.\quad
\textbf{dt:} 0.005\,s.\quad
\textbf{v0:} 20\,m/s.\quad
\textbf{$\theta$:} $60^\circ$.\quad
\textbf{g:} 9.81\,m/s$^2$.\quad
\textbf{e:} 0.7.

\subsection{Tier-1 identity checks (hard)}\label{sec:bal_idchecks}
\begin{itemize}
  \item $F = 1 - \omega$ max error $2.08 \times 10^{-16}$ (PASS).
  \item $\kappa = \ln(IC)$ max error $2.94 \times 10^{-8}$ (PASS).
\end{itemize}

\subsection{Kernel summary (RUN004)}\label{sec:bal_summary}
\begin{table}[H]
\centering
\caption{Kernel statistics for \texttt{KIN.CP.BALLISTIC.RUN004}.}\label{tab:bal_stats}
\begin{tabular}{@{}lcccc@{}}
\toprule
\textbf{Invariant} & \textbf{Median} & \textbf{p05} & \textbf{p95} & \textbf{Notes} \\
\midrule
$\omega$ & 0.3996 & 0.2557 & 0.9010 & drift magnitude (bounded) \\
$F$ & 0.6004 & 0.0990 & 0.7443 & $F = 1 - \omega$ (derived) \\
$S$ & 0.9654 & 0.9384 & 0.9767 & normalized entropy channel \\
$C$ & 0.5000 & 0.0653 & 0.7421 & normalized curvature \\
$\tau_R$ & $\infty_{\mathrm{rec}}$ & --- & --- & censored by design \\
$IC$ & 0.8402 & 0.4128 & 0.9312 & integrity \\
$\kappa$ & $-0.1741$ & $-0.8848$ & $-0.0712$ & $\ln(IC)$ (derived) \\
\bottomrule
\end{tabular}
\end{table}

\noindent\textbf{IC pass rate (RUN004):} 80.5\% of samples have $IC \geq 0.70$.

\subsection{Non-recurrence declaration}\label{sec:bal_nonrec}
\NonRecurrenceNote

\subsection{Seam + weld receipt (typed)}\label{sec:bal_weld}
\noindent\textbf{Seam ID:} \texttt{KIN.SEAM.IMP.001}\quad
\textbf{Seam time:} $t_s = \BallisticSeamTime\,\mathrm{s}$

\begin{table}[H]
\centering
\caption{Weld receipt (RUN004): integrity-only due to non-recurrence.}\label{tab:bal_weld}
\begin{tabular}{@{}ll@{}}
\toprule
Field & Value \\
\midrule
$IC_{\mathrm{pre}}$ & 0.7893 \\
$IC_{\mathrm{post}}$ & 0.8454 \\
Integrity ratio $ir$ & 1.0711 \\
$\Delta\kappa_{\mathrm{ledger}} = \ln(ir)$ & 0.0687 \\
Weld type & \texttt{NON\_RECURRENT\_BY\_DESIGN} \\
Result & \texttt{INTEGRITY\_ONLY} \\
\bottomrule
\end{tabular}
\end{table}

\subsection{Figures (direct from exported CSV)}\label{sec:bal_figs}

\begin{figure}[H]
\centering
\begin{tikzpicture}
\begin{axis}[
  width=0.92\textwidth,
  height=6.0cm,
  xlabel={$x$ (m)},
  ylabel={$y$ (m)},
  tick align=outside,
  tick style={black},
  title={Ballistic trajectory with impact marker (RUN004)},
]
\addplot[very thick, mark=none] table [col sep=comma, x=x, y=y] {\RUNBALL/derived/psi.csv};
\addplot[only marks, mark=*, mark size=2.5pt, red] coordinates {(\BallisticSeamX,0.0)};
\node[anchor=south west, font=\small] at (axis cs:\BallisticSeamX,0.0) {$t_s = \BallisticSeamTime\,\mathrm{s}$};
\end{axis}
\end{tikzpicture}
\caption{Trajectory rendered from \texttt{\RUNBALL/derived/psi.csv}. Return is censored by design; seam shown for accounting only.}
\label{fig:bal_traj}
\end{figure}

\begin{figure}[H]
\centering
\begin{tikzpicture}
\begin{groupplot}[
  group style={group size=1 by 4, vertical sep=0.45cm},
  width=0.92\textwidth,
  height=2.7cm,
  xlabel near ticks,
  ylabel near ticks,
  tick align=outside,
  tick style={black},
  xmin=0,
  every axis plot/.style={very thick, mark=none},
]
\nextgroupplot[ylabel={$\omega$}, title={BALLISTIC kernel traces (RUN004)}]
  \addplot table [col sep=comma, x=t, y=omega] {\RUNBALL/kernel/kernel.csv};
  \addplot[dashed, red, thin] coordinates {(\BallisticSeamTime, 0) (\BallisticSeamTime, 1)};

\nextgroupplot[ylabel={$F$}]
  \addplot table [col sep=comma, x=t, y=F] {\RUNBALL/kernel/kernel.csv};
  \addplot[dashed, red, thin] coordinates {(\BallisticSeamTime, 0) (\BallisticSeamTime, 1)};

\nextgroupplot[ylabel={$IC$}]
  \addplot table [col sep=comma, x=t, y=IC] {\RUNBALL/kernel/kernel.csv};
  \addplot[dashed, red, thin] coordinates {(\BallisticSeamTime, 0) (\BallisticSeamTime, 1)};

\nextgroupplot[ylabel={$\kappa$}, xlabel={time $t$ (s)}]
  \addplot table [col sep=comma, x=t, y=kappa] {\RUNBALL/kernel/kernel.csv};
  \addplot[dashed, red, thin] coordinates {(\BallisticSeamTime, -1) (\BallisticSeamTime, 0)};
\end{groupplot}
\end{tikzpicture}
\caption{BALLISTIC kernel traces with seam marker at $t_s = \BallisticSeamTime\,\mathrm{s}$ (dashed red).}
\label{fig:bal_kernel_traces}
\end{figure}

% ============================================================================
% CASEPACK 3: GAIT (IMU Gait Data)
% ============================================================================
\section{CasePack 3: IMU Gait (KIN.CP.GAIT)}\label{sec:casepack_gait}

This CasePack validates quasi-periodic return under multi-channel inertial observables, with return anchored to a frozen gait event definition (and typed censoring where applicable).

\subsection{Run identity (RUN004)}\label{sec:gait_runid}
\noindent\textbf{Contract:} \ContractName.\quad
\textbf{Run ID:} \texttt{KIN.CP.GAIT.RUN004}.\quad
\textbf{N:} 3000.\quad
\textbf{fs:} 100\,Hz.\quad
\textbf{Target period:} 0.5556\,s (1/1.8\,Hz).

\subsection{Tier-1 identity checks (hard)}\label{sec:gait_idchecks}
\begin{itemize}
  \item $F = 1 - \omega$ max error $2.22 \times 10^{-16}$ (PASS).
  \item $\kappa = \ln(IC)$ max error $4.39 \times 10^{-8}$ (PASS).
\end{itemize}

\subsection{Kernel summary (RUN004)}\label{sec:gait_summary}
\begin{table}[H]
\centering
\caption{Kernel statistics for \texttt{KIN.CP.GAIT.RUN004}.}\label{tab:gait_stats}
\begin{tabular}{@{}lcccc@{}}
\toprule
\textbf{Invariant} & \textbf{Median} & \textbf{p05} & \textbf{p95} & \textbf{Notes} \\
\midrule
$\omega$ & 0.2493 & 0.0822 & 0.5615 & drift magnitude (bounded) \\
$F$ & 0.7507 & 0.4385 & 0.9178 & $F = 1 - \omega$ (derived) \\
$S$ & 0.9116 & 0.8497 & 0.9649 & normalized entropy channel \\
$C$ & 0.5000 & 0.0706 & 0.7595 & normalized curvature \\
$\tau_R$ & 0.5500\,s & 0.5100\,s & 0.6100\,s & 0.56\% deviation vs 0.5556\,s \\
$IC$ & 0.8044 & 0.5360 & 0.9793 & integrity \\
$\kappa$ & $-0.2177$ & $-0.6236$ & $-0.0209$ & $\ln(IC)$ (derived) \\
\bottomrule
\end{tabular}
\end{table}

\noindent\textbf{IC pass rate (RUN004):} 71.6\% of samples have $IC \geq 0.70$.

\subsection{Figures (direct from exported CSV)}\label{sec:gait_figs}

\begin{figure}[H]
\centering
\begin{tikzpicture}
\begin{groupplot}[
  group style={group size=1 by 7, vertical sep=0.45cm},
  width=0.92\textwidth,
  height=2.7cm,
  xlabel near ticks,
  ylabel near ticks,
  tick align=outside,
  tick style={black},
  xmin=0,
  every axis plot/.style={very thick, mark=none},
]
\nextgroupplot[ylabel={$\omega$}, title={GAIT kernel traces (RUN004)}]
  \addplot table [col sep=comma, x=t, y=omega] {\RUNGAIT/kernel/kernel.csv};

\nextgroupplot[ylabel={$F$}]
  \addplot table [col sep=comma, x=t, y=F] {\RUNGAIT/kernel/kernel.csv};

\nextgroupplot[ylabel={$S$}]
  \addplot table [col sep=comma, x=t, y=S] {\RUNGAIT/kernel/kernel.csv};

\nextgroupplot[ylabel={$C$}]
  \addplot table [col sep=comma, x=t, y=C] {\RUNGAIT/kernel/kernel.csv};

\nextgroupplot[ylabel={$\tau_R$ (s)}]
  \addplot table [col sep=comma, x=t, y=tau_R] {\RUNGAIT/kernel/kernel.csv};

\nextgroupplot[ylabel={$IC$}]
  \addplot table [col sep=comma, x=t, y=IC] {\RUNGAIT/kernel/kernel.csv};

\nextgroupplot[ylabel={$\kappa$}, xlabel={time $t$ (s)}]
  \addplot table [col sep=comma, x=t, y=kappa] {\RUNGAIT/kernel/kernel.csv};
\end{groupplot}
\end{tikzpicture}
\caption{GAIT Tier-1 kernel traces rendered directly from \texttt{\RUNGAIT/kernel/kernel.csv}.}
\label{fig:gait_kernel_traces}
\end{figure}

\begin{figure}[H]
\centering
\begin{tikzpicture}
\begin{axis}[
  width=0.92\textwidth,
  height=5.0cm,
  xlabel={$\tau_R$ (s)},
  ylabel={count},
  tick align=outside,
  tick style={black},
  title={GAIT recurrence distribution (RUN004)},
]
\addplot+[
  hist={bins=30},
  fill=green!30,
  draw=green!70,
] table [col sep=comma, y=tau_R] {\RUNGAIT/tables/tauR_series.csv};
\end{axis}
\end{tikzpicture}
\caption{$\tau_R$ histogram rendered from \texttt{\RUNGAIT/tables/tauR\_series.csv}.}
\label{fig:gait_tauR_hist}
\end{figure}

% ============================================================================
% GATE ALIGNMENT APPENDIX SECTION
% ============================================================================
\section{Gate Alignment Normalization}\label{sec:gate_alignment}

\GateAlignmentNote

\subsection{Frozen scales from SHM control}

The gate alignment scales are frozen from the SHM control casepack (RUN004):

\begin{table}[H]
\centering
\caption{Frozen gate alignment scales.}\label{tab:frozen_scales}
\begin{tabular}{@{}llll@{}}
\toprule
Scale & Value & Definition & Legacy threshold \\
\midrule
$\Omega$ & \FrozenOmega & $\mathrm{p95}(\omega_{\mathrm{SHM}}) / 0.038$ & $\omega < 0.038$ (Stable) \\
$\Sigma$ & \FrozenSigma & $\mathrm{p95}(S_{\mathrm{SHM}}) / 0.15$ & $S < 0.15$ (Stable) \\
$\mathcal{C}$ & \FrozenCalC & $\mathrm{p95}(C_{\mathrm{SHM}}) / 0.14$ & $C < 0.14$ (Stable) \\
\bottomrule
\end{tabular}
\end{table}

Under this normalization:
\[
\omega_{\mathrm{gate}} = \mathrm{clip}\!\left(\frac{\omega_{\mathrm{raw}}}{\Omega}, 0, 1\right), \quad
S_{\mathrm{gate}} = \mathrm{clip}\!\left(\frac{S_{\mathrm{raw}}}{\Sigma}, 0, 1\right), \quad
C_{\mathrm{gate}} = \mathrm{clip}\!\left(\frac{C_{\mathrm{raw}}}{\mathcal{C}}, 0, 1\right)
\]

A point classifies as \emph{Stable} if $\omega_{\mathrm{gate}} < 1$, $S_{\mathrm{gate}} < 1$, and $C_{\mathrm{gate}} < 1$.

% End of umcp_casepacks_sections.tex
