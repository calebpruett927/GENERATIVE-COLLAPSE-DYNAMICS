schema: "schemas/contract.schema.json"
# Contract interconnections:
# - Referenced by: manifest.yaml (refs.contract)
# - Specifies: Tier-1 kernel, typed censoring rules (no_return_no_credit)
# - Canon anchor: canon/anchors.yaml
# - Documentation: GLOSSARY.md#contract, docs/interconnected_architecture.md

contract:
  id: "UMA.INTSTACK.v1"
  version: "1.0.0"
  timezone: "America/Chicago"
  notes: "Contract specification for this CasePack run"

  embedding:
    interval: [0.0, 1.0]
    face: "pre_clip"
    oor_policy: "clip_and_flag"
    epsilon: 1.0e-8

  tier_1_kernel:
    reserved_symbols:
      - "ω"
      - "F"
      - "S"
      - "C"
      - "τ_R"
      - "κ"
      - "IC"
      - "omega"
      - "tau_R"
      - "kappa"

    weights_policy: "nonnegative_sum_to_one"

    frozen_parameters:
      p: 3
      alpha: 1.0
      lambda: 0.2
      eta: 1.0e-3

    tolerances:
      tol_seam: 0.005
      tol_id: 1.0e-9

  rounding_policy:
    precision: 6
    mode: "round_half_even"
    notes: "IEEE 754 round-half-to-even for reproducible presentation"

  typed_censoring:
    tau_R_special_values:
      - "INF_REC"
      - "UNIDENTIFIABLE"

    run_status_enum:
      - "CONFORMANT"
      - "NONCONFORMANT"
      - "NON_EVALUABLE"

    no_return_no_credit: true
