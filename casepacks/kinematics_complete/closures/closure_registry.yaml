# Kinematics CasePack - Closure Registry
# Specifies which closures are used for this casepack

schema: "schemas/closures.schema.json"

registry:
  id: "UMCP.CLOSURES.KINEMATICS.v1"
  description: "Closure registry for kinematics casepack"
  contract: "KIN.INTSTACK.v1"

  # Base closures (inherited from UMCP)
  base_closures:
    gamma:
      path: "closures/gamma.default.v1.yaml"
    return_domain:
      path: "closures/return_domain.window64.v1.yaml"
    norms:
      path: "closures/norms.l2_eta1e-3.v1.yaml"

  # Kinematics-specific closures
  kinematics_closures:
    linear_kinematics:
      path: "closures/kinematics/linear_kinematics.py"
      function: "compute_linear_kinematics"
      description: "Linear position, velocity, acceleration"
      inputs: ["x", "v", "a", "dt"]
      outputs: ["position", "velocity", "acceleration", "phase_magnitude", "predicted_x_next", "predicted_v_next", "regime"]

    rotational_kinematics:
      path: "closures/kinematics/rotational_kinematics.py"
      function: "compute_rotational_kinematics"
      description: "Angular position, velocity, acceleration, torque"
      inputs: ["theta", "omega_rot", "alpha", "I_normalized", "dt"]
      outputs: ["theta", "omega_rot", "alpha", "angular_momentum", "torque", "E_rotational", "regime"]

    energy_mechanics:
      path: "closures/kinematics/energy_mechanics.py"
      functions:
        - compute_kinetic_energy
        - compute_potential_energy
        - compute_mechanical_energy
        - compute_work
        - compute_power
        - verify_energy_conservation
      description: "Energy calculations and conservation verification"

    momentum_dynamics:
      path: "closures/kinematics/momentum_dynamics.py"
      functions:
        - compute_linear_momentum
        - compute_impulse
        - compute_collision_1d
        - verify_momentum_conservation
      description: "Momentum calculations and conservation verification"

    phase_space_return:
      path: "closures/kinematics/phase_space_return.py"
      function: "compute_kinematic_return"
      description: "Return time computation in phase space"
      inputs: ["x_series", "v_series", "eta_phase", "H_rec_kin"]
      outputs: ["tau_kin", "return_status", "return_rate", "dynamics_regime"]

    kinematic_stability:
      path: "closures/kinematics/kinematic_stability.py"
      function: "compute_kinematic_stability"
      description: "Stability index and regime classification"
      inputs: ["x_series", "v_series", "a_series"]
      outputs: ["K_stability", "S_kin", "C_kin", "omega_kin", "regime"]

  # Validation closures
  validation:
    energy_conservation:
      tolerance: 0.01
      description: "Verify mechanical energy conservation"
    momentum_conservation:
      tolerance: 0.01
      description: "Verify momentum conservation in collisions"
    kinematic_consistency:
      tolerance: 0.01
      description: "Verify v ≈ dx/dt and a ≈ dv/dt"
